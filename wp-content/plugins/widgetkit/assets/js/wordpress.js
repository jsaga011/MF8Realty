"use strict";!function(e,t){function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r,f=i(e),n=i(t);n.default.module("Fields").directive("fieldWysiwygeditor",["$timeout","mediaPicker",function(n,p){return{restrict:"EA",require:"?ngModel",template:'<div><textarea class="uk-textarea" name="wk_{{id}}" id="wk_{{id}}"></textarea></div>',link:function(e,t,i,c){if(window.tinyMCE){e.id=String(Math.ceil(1e3*Math.random()));var s="wk_"+e.id;n(function(){var e,t,i,n,r=window.tinyMCE,a=(null==(e=r.settings)?void 0:e.toolbar1)||"bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_more,spellchecker,dfw,wp_adv";-1===a.indexOf("wk_media")&&(a+=" wk_media");var l=(null==(t=r.settings)?void 0:t.toolbar2)||"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",o=(null==(i=r.settings)?void 0:i.plugins)||"charmap,colorpicker,hr,lists,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpautoresize,wpeditimage,wpemoji,wpgallery,wplink,wpdialogs,wptextpattern,wpview",u=f.default.extend({},r.settings,{menubar:!1,plugins:o,toolbar1:a,toolbar2:l,width:"100%",height:500,relative_urls:(null==(n=r.settings)?void 0:n.relative_urls)||!1,setup:function(e){e.addButton("wk_media",{text:"",icon:"image",onclick:function(){p.select({editor:s})}}),e.on("change",function(){c.$setViewValue(r.get(s).getContent())}),e.on("input",function(){c.$setViewValue(r.get(s).getContent())}),e.on("init",function(){e.setContent(c.$viewValue||"")})}}),d=new r.Editor(s,u,r.EditorManager);d.render(),c.$render=function(){try{d.setContent(c.$viewValue||""),f.default("#"+s).val(c.$viewValue||"")}catch(e){}},c.$render()})}}}}]),(r=n.default).module("widgetkit").service("mediaPicker",["$location","$q","Application",function(a,e,t){var l=new RegExp("^"+t.baseUrl());return{select:function(t){t=r.extend({title:"Pick media",multiple:!1,button:{text:"Select"}},t);var i=e.defer();if(t.editor)t=r.extend({frame:"post"},t),wp.media.editor.open(t.editor,t);else var n=wp.media(t).on("select",function(){var e=n.state().get("selection").map(function(e){var t,i,n=e.toJSON(),r=(t=n.url,(i=document.createElement("a")).href=t,i);return r.host===a.host()&&(n.url=r.pathname.replace(l,"").replace(/^\//,"")),n});i.resolve(t.multiple?e:e[0])}).open();return i.promise}}}]),f.default(function(){return f.default("[data-app]").addClass("wrap")})}(jQuery,angular);